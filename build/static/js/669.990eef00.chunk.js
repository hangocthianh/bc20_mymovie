"use strict";(self.webpackChunkbc20_mymovie=self.webpackChunkbc20_mymovie||[]).push([[669],{51669:function(e,n,a){a.r(n),a.d(n,{default:function(){return V}});var s,r=a(70885),t=a(72791),i=a(16030),l=a(28639),o=a(68925),c=function(){return function(e){e(d()),l.Z.get("QuanLyNguoiDung/LayDanhSachNguoiDung?MaNhom=GP02").then((function(n){e(u(n.data.content))})).catch((function(n){e(h(n))}))}},d=function(){return{type:o.Ev}},u=function(e){return{type:o.lB,payload:e}},h=function(e){return{type:o.Th,payload:e}},m=a(30168),x=a(96048),f=a.n(x),j=a(24603),p=a(23853),g=a(80184),v=(0,j.ZP)(f()).attrs({activeClassName:"active"})(s||(s=(0,m.Z)(["\n  margin-bottom: 2rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  list-style-type: none;\n  padding: 0 5rem;\n  li a {\n    border-radius: 7px;\n    padding: 0.1rem 1rem;\n    border: gray 1px solid;\n    cursor: pointer;\n  }\n  li.previous a,\n  li.next a,\n  li.break a {\n    border-color: transparent;\n  }\n  li.active a {\n    background-color: #0366d6;\n    border-color: transparent;\n    color: white;\n    min-width: 32px;\n  }\n  li.disabled a {\n    color: grey;\n  }\n  li.disable,\n  li.disabled a {\n    cursor: default;\n  }\n"])));function N(e){var n=e.currentItems,a=e.handleShowEditUserModal,s=e.itemOffset,r=e.handleDeleteUser;return(0,g.jsx)(g.Fragment,{children:n&&n.map((function(e,n){return(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"row",className:"align-middle text-center",children:n+1+s}),(0,g.jsx)("td",{className:"align-middle text-center",children:e.taiKhoan}),(0,g.jsx)("td",{className:"align-middle text-center",children:e.matKhau}),(0,g.jsx)("td",{className:"align-middle text-center",children:e.hoTen}),(0,g.jsx)("td",{className:"align-middle text-center",children:e.email}),(0,g.jsx)("td",{className:"align-middle text-center",children:e.soDt}),(0,g.jsxs)("td",{className:"align-middle text-center",children:[(0,g.jsx)("button",{className:"btn btn-primary",onClick:function(){a(e)},children:(0,g.jsx)(p.IYd,{})}),(0,g.jsx)("button",{className:"btn btn-danger",onClick:function(){r(e)},children:(0,g.jsx)(p.Ybf,{})})]})]},n)}))})}function b(e){var n=e.itemsPerPage,a=e.handleShowEditUserModal,s=e.handleDeleteUser,l=(0,i.v9)((function(e){return e.userManagementReducer.data})),o=(0,t.useState)(null),c=(0,r.Z)(o,2),d=c[0],u=c[1],h=(0,t.useState)(0),m=(0,r.Z)(h,2),x=m[0],f=m[1],j=(0,t.useState)(0),p=(0,r.Z)(j,2),b=p[0],Z=p[1];(0,t.useEffect)((function(){var e=b+n;u(null===l||void 0===l?void 0:l.slice(b,e)),f(Math.ceil((null===l||void 0===l?void 0:l.length)/n))}),[b,n]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("table",{className:"table px-3 table-bordered",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"text-center",scope:"col",children:"STT"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Account"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Password"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Full Name"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Email"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Phone number"}),(0,g.jsx)("th",{className:"text-center",scope:"col",children:"Action"})]})}),(0,g.jsx)("tbody",{children:(0,g.jsx)(N,{currentItems:d,itemOffset:b,handleShowEditUserModal:a,handleDeleteUser:s})})]}),(0,g.jsx)(v,{breakLabel:"...",nextLabel:"next >",onPageChange:function(e){var a=e.selected*n%(null===l||void 0===l?void 0:l.length);Z(a)},pageRangeDisplayed:3,pageCount:x,previousLabel:"< previous",renderOnZeroPageCount:null})]})}var Z=a(21830),y=a.n(Z),S=a(4942),D=a(1413),k=a(5603),K=a(43360),w=a(44846),C=a(40071);function T(e){var n=e.showAddUser,a=e.handleCloseAddUserModal,s=(0,i.I0)(),o=(0,t.useState)({values:{taiKhoan:"",matKhau:"",hoTen:"",email:"",soDt:"",maNhom:"GP02",maLoaiNguoiDung:"KhachHang"},errors:{taiKhoan:"",matKhau:"",hoTen:"",email:"",soDt:""},formValid:!1,accValid:!1,passValid:!1,emailValid:!1,phoneValid:!1,nameValid:!1}),d=(0,r.Z)(o,2),u=d[0],h=d[1],m=function(e){var n=e.target,a=n.name,s=n.value,r=""===s.trim()?"Vui l\xf2ng nh\u1eadp v\xe0o ".concat(a):"",t=u.accValid,i=u.passValid,l=u.emailValid,o=u.phoneValid,c=u.nameValid;switch(a){case"hoTen":c=""===r;break;case"email":l=""===r,s&&!s.match(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)&&(l=!1,r="Email kh\xf4ng h\u1ee3p l\u1ec7");break;case"soDt":o=""===r;break;case"taiKhoan":t=""===r;break;case"matKhau":i=""===r}h({values:(0,D.Z)((0,D.Z)({},u.values),{},(0,S.Z)({},a,s)),errors:(0,D.Z)((0,D.Z)({},u.errors),{},(0,S.Z)({},a,r)),accValid:t,passValid:i,emailValid:l,phoneValid:o,nameValid:c,formValid:t&&i&&l&&o&&c})},x=function(){h({values:(0,D.Z)({},u.values),errors:(0,D.Z)({},u.errors)})},f=function(e,n){y().fire({icon:e,title:n,confirmButtonText:"OK"})};return(0,g.jsxs)(k.Z,{show:n,onHide:a,children:[(0,g.jsxs)(k.Z.Header,{children:[(0,g.jsx)(k.Z.Title,{children:"Add User"}),(0,g.jsx)(K.Z,{variant:"primary",onClick:function(){a(),x()},style:{display:"inherit",alignSelf:"center"},children:(0,g.jsx)(C.Lp2,{size:20})})]}),(0,g.jsx)(k.Z.Body,{children:(0,g.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault(),s(function(e,n,a,s){return function(r){l.Z.post("QuanLyNguoiDung/ThemNguoiDung",e).then((function(e){r(c()),a(),s();var t=e.data.message;n("success",t)})).catch((function(e){n("error",JSON.stringify(e.response.data.content))}))}}(u.values,f,a,x))},children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"T\xe0i kho\u1ea3n"}),(0,g.jsx)("input",{className:"form-control",name:"taiKhoan",onChange:m}),u.errors.taiKhoan&&(0,g.jsx)(w.Z,{variant:"danger",children:u.errors.taiKhoan})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"M\u1eadt kh\u1ea9u"}),(0,g.jsx)("input",{className:"form-control",name:"matKhau",onChange:m}),u.errors.matKhau&&(0,g.jsx)(w.Z,{variant:"danger",children:u.errors.matKhau})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"H\u1ecd t\xean"}),(0,g.jsx)("input",{className:"form-control",name:"hoTen",onChange:m}),u.errors.hoTen&&(0,g.jsx)(w.Z,{variant:"danger",children:u.errors.hoTen})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"Email"}),(0,g.jsx)("input",{className:"form-control",name:"email",onChange:m}),u.errors.email&&(0,g.jsx)(w.Z,{variant:"danger",children:u.errors.email})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,g.jsx)("input",{className:"form-control",name:"soDt",onChange:m}),u.errors.soDt&&(0,g.jsx)(w.Z,{variant:"danger",children:u.errors.soDt})]}),(0,g.jsx)("div",{className:"form-group text-center",children:(0,g.jsx)("button",{type:"submit",className:"btn btn-success",disabled:!u.formValid,children:"Add"})})]})})]})}function U(e){var n=e.showEditUser,a=e.handleCloseEditUserModal,s=e.user,l=((0,i.I0)(),(0,t.useState)((0,D.Z)((0,D.Z)({},s),{},{maNhom:"GP02"}))),o=(0,r.Z)(l,2),c=o[0];o[1];return(0,g.jsxs)(k.Z,{show:n,onHide:a,children:[(0,g.jsxs)(k.Z.Header,{children:[(0,g.jsx)(k.Z.Title,{children:"Edit User"}),(0,g.jsx)(K.Z,{variant:"primary",onClick:function(){a()},style:{display:"inherit",alignSelf:"center"},children:(0,g.jsx)(C.Lp2,{size:20})})]}),(0,g.jsx)(k.Z.Body,{children:(0,g.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault(),console.log(c)},children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"T\xe0i kho\u1ea3n"}),(0,g.jsx)("input",{className:"form-control",name:"taiKhoan",value:c.taiKhoan})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"M\u1eadt kh\u1ea9u"}),(0,g.jsx)("input",{className:"form-control",name:"matKhau",value:c.matKhau})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"H\u1ecd t\xean"}),(0,g.jsx)("input",{className:"form-control",name:"hoTen",value:c.hoTen})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"Email"}),(0,g.jsx)("input",{className:"form-control",name:"email",value:c.email})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("span",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,g.jsx)("input",{className:"form-control",name:"soDt",value:c.soDt})]}),(0,g.jsx)("div",{className:"form-group text-center",children:(0,g.jsx)("button",{type:"submit",className:"btn btn-success",children:"Edit"})})]})})]})}function V(){var e=(0,i.v9)((function(e){return e.userManagementReducer.loading})),n=(0,i.I0)();(0,t.useEffect)((function(){n(c())}),[n]);var a=function(e,n){y().fire({icon:e,title:n,confirmButtonText:"OK"})},s=(0,t.useState)(!1),o=(0,r.Z)(s,2),d=o[0],u=o[1],h=(0,t.useState)({}),m=(0,r.Z)(h,2),x=m[0],f=m[1],j=(0,t.useState)(!1),p=(0,r.Z)(j,2),v=p[0],N=p[1];return(0,g.jsxs)("div",{className:"col-md-9 ml-sm-auto col-lg-10 px-md-4",children:[(0,g.jsx)("h3",{className:"mt-4 mb-3",children:"User Management"}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-10",children:(0,g.jsx)("input",{className:"form-control form-control-dark w-100",type:"text",placeholder:"Search","aria-label":"Search",style:{border:"1px solid black"}})}),(0,g.jsx)("div",{className:"col-md-2",children:(0,g.jsx)("button",{className:"btn btn-secondary",children:"Search"})})]}),(0,g.jsx)("button",{className:"btn btn-success mt-3",onClick:function(){return u(!0)},children:"Add User"}),(0,g.jsx)(T,{showAddUser:d,handleCloseAddUserModal:function(){return u(!1)}}),(0,g.jsx)(U,{showEditUser:v,handleCloseEditUserModal:function(){return N(!1)},user:x}),(0,g.jsx)("div",{className:"row mt-3",children:(0,g.jsx)("div",{className:"col-md-12",children:e?(0,g.jsx)("div",{children:"Loading..."}):(0,g.jsx)(b,{itemsPerPage:20,handleShowEditUserModal:function(e){N(!0),f(e)},handleDeleteUser:function(e){n(function(e,n){return function(a){l.Z.delete("QuanLyNguoiDung/XoaNguoiDung?TaiKhoan=".concat(e.taiKhoan),e).then((function(e){a(c());var s=JSON.stringify(e.data.content);n("success",s)})).catch((function(e){var a=JSON.stringify(e.response.data.content);n("error",a)}))}}(e,a))}})})})]})}}}]);
//# sourceMappingURL=669.990eef00.chunk.js.map